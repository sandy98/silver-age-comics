(function(){"use strict";var a=typeof window!="undefined"?window:global;if(typeof a.require=="function")return;var b={},c={},d=function(a,b){return{}.hasOwnProperty.call(a,b)},e=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e===".."?c.pop():e!=="."&&e!==""&&c.push(e);return c.join("/")},f=function(a){return a.split("/").slice(0,-1).join("/")},g=function(b){return function(c){var d=f(b),g=e(d,c);return a.require(g)}},h=function(a,b){var d={id:a,exports:{}};b(d.exports,g(a),d);var e=c[a]=d.exports;return e},i=function(a){var f=e(a,".");if(d(c,f))return c[f];if(d(b,f))return h(f,b[f]);var g=e(f,"./index");if(d(c,g))return c[g];if(d(b,g))return h(g,b[g]);throw new Error('Cannot find module "'+a+'"')},j=function(a,c){if(typeof a=="object")for(var e in a)d(a,e)&&(b[e]=a[e]);else b[a]=c};a.require=i,a.require.define=j,a.require.register=j,a.require.brunch=!0})(),window.require.register("application",function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b("lib/view_helper"),g=b("models/user"),d=b("models/item"),e=b("models/items"),f=b("models/styles"),a=function(a){function c(){this.initialize=h(this.initialize,this),this.setTheme=h(this.setTheme,this),this.setReader=h(this.setReader,this),this.getVisitors=h(this.getVisitors,this),c.__super__.constructor.apply(this,arguments)}return j(c,a),c.VERSION="0.1.1",c.prototype.getVisitors=function(a){return $.get("/visitors",function(b){return a(b)})},c.prototype.theme="cerulean",c.prototype.setReader=function(a){return this.optExternalReader=a,$.cookie("optExternalReader",this.optExternalReader,{expires:365})},c.prototype.setTheme=function(a){return this.theme=a,$.cookie("theme",this.theme,{expires:365}),$("#current-style").attr("href","stylesheets/"+this.theme+"/bootstrap.min.css")},c.prototype.initialize=function(){var a,c=this;return a=b("views/UserItemView"),this.currentView=null,this.dataSource=b("./datasource"),this.user=new g,this.item=new d({app:this,path:""}),this.vent.on("reader",function(a){var b,d,e,f,g;return d=a.page,b=a.comic,g=a.zoom||70,c.dontReloadReader=a.dontReload!=null,e=b.get("path"),f="reader/"+e.replace(/\//g,"_")+"/"+d+"/"+g,f=f.replace("__","_"),f=f.replace("//","/_/"),c.router.navigate(f,!0)}),this.vent.on("item:selected",function(a){var b,d,e;return d=a.get("path"),b=a.get("currentPage"),e="contents/"+d.replace(/\//g,"_")+"/"+b,e=e.replace("__","_"),e=e.replace("//","/_/"),c.router.navigate(e,!0)}),this.vent.on("navigation",function(a){var b,e,f;if(c.user.get("username")||!c.user.get("username")){b=c.currentView,c.currentView=a.view;if(a.href==="reader"&&c.dontReloadReader)return;return a.href==="contents"?(c.menuView.setContentsRoute("#contents/"+a.path+"/"+a.page),e=a.path.replace(/_/g,"/")||"/",((f=c.item)!=null?f.get("path"):void 0)===e?(console.log("No need to fetch data from server"),c.item.set("currentPage",parseInt(a.page)),c.layout.content.show(a.view),c.vent.trigger("item:loaded",c.item)):(c.item=new d({path:e,currentPage:parseInt(a.page)}),c.item.fetch({success:function(b,d){return c.layout.content.show(a.view),c.vent.trigger("item:loaded",c.item)},error:function(a){return bootbox.alert("Server possibly down")}}))):c.layout.content.show(a.view),c.menuView.highlight(a)}return a.href==="contents"?(c.router.navigate("",{trigger:!0}),bootbox.alert("Must be logged in to access contents.")):(c.layout.content.show(a.view),c.menuView.highlight(a))}),this.vent.on("login",function(a){return console.log("login: "+a.get("username")),c.user=a,c.menuView.model=c.user,c.layout.menu.show(c.menuView)}),this.vent.on("logout",function(){return console.log("logout"),c.user=new g,c.menuView.model=c.user,c.layout.menu.show(c.menuView),c.router.navigate("",{trigger:!0})}),this.vent.on("newuser",function(){var b;return b=new a({vent:c.vent,model:new g,dataSource:c.dataSource,mode:"insert"}),c.layout.popup.show(b)}),this.vent.on("edituser",function(){var b;return b=new a({vent:c.vent,model:c.user,dataSource:c.dataSource,mode:"update"}),c.layout.popup.show(b)}),this.on("initialize:after",function(a){return Backbone.history.start()}),this.addInitializer(function(a){return $(document).ajaxStart(function(){return $("#ajax-loader").show()}),$(document).ajaxStop(function(){return $("#ajax-loader").hide()})}),this.addInitializer(function(a){var b;return c.setTheme($.cookie("theme")||"cerulean"),$.cookie("optExternalReader")==="true"?b=!0:b=!1,c.setReader(b)}),this.addInitializer(function(a){var d,e,g;return d=b("views/AppLayout"),g=b("views/MenuView"),e=b("views/FooterView"),c.styles=new f,c.styles.fetch(),c.layout=new d,c.layout.render(),c.menuView=new g({vent:c.vent,dataSource:c.dataSource,model:c.user}),c.layout.menu.show(c.menuView),c.footerView=new e({vent:c.vent}),c.layout.footer.show(c.footerView)}),this.addInitializer(function(a){var d;return d=b("lib/router"),c.router=new d}),this.start()},c}(Backbone.Marionette.Application),c.exports=new a})).call(this)}),window.require.register("datasource",function(a,b,c){((function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(){this.updateUser=b(this.updateUser,this),this.insertUser=b(this.insertUser,this),this.getUserByCid=b(this.getUserByCid,this),this.getUser=b(this.getUser,this)}return a.prototype.users=new Backbone.Collection([new Backbone.Model({username:"lar-gand",fullname:"Mon-El",pwd:"daxamite",email:"daxam@gmail.com"}),new Backbone.Model({username:"kal-el",fullname:"Superboy",pwd:"kryptonian",email:"krypton@gmail.com"}),new Backbone.Model({username:"rokk-krinn",fullname:"Cosmic Boy",pwd:"braalian",email:"braal@gmail.com"})]),a.prototype.getUser=function(a,b,c){var d,e,f,g,h;e=this.users.length;for(d=0,h=e-1;0<=h?d<=h:d>=h;0<=h?d++:d--){g=this.users.at(d);if((g.get("username").toLowerCase()===a.toLowerCase()||g.get("email").toLowerCase()===a.toLowerCase())&&g.get("pwd")===b)return c&&c(null,g),g}return c&&(f="Wrong username and/or password",c(f,null)),f},a.prototype.getUserByCid=function(a,b){var c,d,e,f,g;d=this.users.length;for(c=0,g=d-1;0<=g?c<=g:c>=g;0<=g?c++:c--){f=this.users.at(c);if(f.cid===a)return b&&b(null,f),f}return b&&(e="Cid not found",b(e,null)),e},a.prototype.insertUser=function(a,b){this.users.add(a);if(b)return b(null,a)},a.prototype.updateUser=function(a,b,c){var d,e,f,g;e=this.users.length;for(d=0,g=e-1;0<=g?d<=g:d>=g;0<=g?d++:d--){f=this.users.at(d);if(f.cid===a)return f.set(b),c&&c(null,f),f}return c&&c("Wrong user",null),null},a}(),c.exports=new a})).call(this)}),window.require.register("initialize",function(a,b,c){((function(){var a;window.app=a=b("application"),$(function(){return a.initialize()})})).call(this)}),window.require.register("lib/router",function(a,b,c){((function(){var a,d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j=Object.prototype.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};h=b("application"),e=b("views/HomeView"),d=b("views/ContentsView"),a=b("views/AboutView"),f=b("views/ReaderView"),c.exports=g=function(b){function c(){this.edituser=i(this.edituser,this),this.newuser=i(this.newuser,this),this.logout=i(this.logout,this),this.about=i(this.about,this),this.contents=i(this.contents,this),this.reader=i(this.reader,this),this.home=i(this.home,this),c.__super__.constructor.apply(this,arguments)}return k(c,b),c.prototype.routes={"":"home",contents:"contents","contents/:path":"contents","contents/:path/:page":"contents",about:"about",reader:"reader","reader/:comic":"reader","reader/:comic/:page":"reader","reader/:comic/:page/:zoom":"reader",dologout:"logout",newuser:"newuser",edituser:"edituser"},c.prototype.home=function(){var a;return $(document.body).off("keyup"),a=new e,h.vent.trigger("navigation",{href:"",view:a})},c.prototype.reader=function(a,b,c){var d;if(h.dontReloadReader){h.currentView.page=parseInt(b),h.currentView.setImage();return}return $(document.body).off("keyup"),b||(b=0),c||(c=70),d=new f({model:new Backbone.Model({comic:a,page:b,zoom:c})}),h.vent.trigger("navigation",{href:"reader",view:d})},c.prototype.contents=function(a,b){var c,e;return $(document.body).off("keyup"),((e=h.currentView)!=null?e.constructor.name:void 0)==="ContentsView"?c=h.currentView:c=new d,h.contentsView=c,h.vent.trigger("navigation",{href:"contents",view:c,path:a||"_",page:b||"0"})},c.prototype.about=function(){var b;return $(document.body).off("keyup"),b=new a,h.vent.trigger("navigation",{href:"about",view:b})},c.prototype.logout=function(){return $(document.body).off("keyup"),h.vent.trigger("logout"),this.navigate(h.menuView.currentRoute,{trigger:!0})},c.prototype.newuser=function(){return $(document.body).off("keyup"),h.vent.trigger("newuser"),this.navigate(h.menuView.currentRoute,{trigger:!0})},c.prototype.edituser=function(){return $(document.body).off("keyup"),h.vent.trigger("edituser"),this.navigate(h.menuView.currentRoute,{trigger:!0})},c}(Backbone.Router)})).call(this)}),window.require.register("lib/utils",function(a,b,c){((function(){var a;a={butlast:function(a){var b,c,d,e,f;e=a.slice(0,a.length-1),f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b);return f},breadcrumbs:function(b){var c;return c=function(b){var d;return b.length===0?[]:(d=c(a.butlast(b)),d.unshift(b),d)},c(b).reverse()}},c.exports=a})).call(this)}),window.require.register("lib/view_helper",function(a,b,c){((function(){Handlebars.registerHelper("pick",function(a,b){return b.hash[a]})})).call(this)}),window.require.register("models/collection",function(a,b,c){((function(){var a,b=Object.prototype.hasOwnProperty,d=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};c.exports=a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b}(Backbone.Collection)})).call(this)}),window.require.register("models/item",function(a,b,c){((function(){var a,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("../lib/utils"),c.exports=a=function(a){function b(){this.toJSON=e(this.toJSON,this),this.pageNumbers=e(this.pageNumbers,this),this.hideExtension=e(this.hideExtension,this),this.breadcrumbs=e(this.breadcrumbs,this),this.splitNames=e(this.splitNames,this),this.isComic=e(this.isComic,this),this.isDirectory=e(this.isDirectory,this),this.urlRoot=e(this.urlRoot,this),b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.urlRoot=function(){return"item?at="+this.get("path")},b.prototype.defaults={name:"",path:"",type:"directory",currentPage:0},b.prototype.isDirectory=function(){return this.get("type")==="directory"},b.prototype.isComic=function(){return this.get("type")==="rarfile"||this.get("type")==="zipfile"},b.prototype.splitNames=function(){return this.get("path").split("/")},b.prototype.breadcrumbs=function(){return d.breadcrumbs(this.splitNames()).map(function(a){return a.join("/")})},b.prototype.hideExtension=function(){return this.get("name").replace(".cbr","").replace(".cbz","")},b.prototype.pageNumbers=function(){var a,b,c,d;b=this.get("pages");if(!b)return[];d=[];for(a=1,c=b.length;1<=c?a<=c:a>=c;1<=c?a++:a--)d.push({shown:a,real:a-1});return d},b.prototype.toJSON=function(){var a,b;return a=_.clone(this.attributes),a.isDirectory=this.isDirectory(),a.isComic=this.isComic(),a.ancestryNames=this.splitNames(),a.ancestryPaths=this.breadcrumbs(),a.ancestryObjs=function(){var c,d;d=[];for(b=0,c=a.ancestryNames.length-1;0<=c?b<=c:b>=c;0<=c?b++:b--)d.push({name:a.ancestryNames[b],path:a.ancestryPaths[b]});return d}(),a.bareName=this.hideExtension(),a.pageNumbers=this.pageNumbers(),a},b}(Backbone.Model)})).call(this)}),window.require.register("models/items",function(a,b,c){((function(){var a,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=b("models/item"),c.exports=d=function(b){function c(){this.maxPage=e(this.maxPage,this),this.parse=e(this.parse,this),this.toJSON=e(this.toJSON,this),c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.model=a,c.prototype.firstPage=0,c.prototype.currentPage=0,c.prototype.perPage=5,c.prototype.toJSON=function(){var a,b;return b=this.currentPage*this.perPage,a=b+this.perPage,this.models.slice(b,a)},c.prototype.parse=function(){return new Backbone.Collection(this.toJSON())},c.prototype.maxPage=function(){return Math.ceil(this.models.length/this.perPage)-1},c}(Backbone.Collection)})).call(this)}),window.require.register("models/model",function(a,b,c){((function(){var a,b=Object.prototype.hasOwnProperty,d=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};c.exports=a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b}(Backbone.Model)})).call(this)}),window.require.register("models/styles",function(a,b,c){((function(){var a,b=Object.prototype.hasOwnProperty,d=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};c.exports=a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.url="/styles",b}(Backbone.Collection)})).call(this)}),window.require.register("models/user",function(a,b,c){((function(){var a,b=Object.prototype.hasOwnProperty,d=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.idAttribute="_id",b.prototype.urlRoot="/users",b.prototype.defaults={fullname:"",username:"",birth:"",pwd:"",email:"",role:"user"},b.prototype.initialize=function(){if(!this.birth)return this.birth=moment().format("YYYY-MM-DD")},b.prototype.validate=function(){if(!this.get("fullname"))return bootbox.alert("Can't save.\nReason: User full name can't be blank.",{dropback:!1}),!0;if(!this.get("nick"))return bootbox.alert("Can't save.\nReason: username can't be blank."),!0;if(!this.get("pwd"))return bootbox.alert("Can't save.\nReason: password can't be blank."),!0;if(!this.get("birth"))return bootbox.alert("Can't save.\nReason: birth date can't be null."),!0;if(!this.get("email")||!this.get("email").match(/^\w+@\w+(\.\w+)*$/))return bootbox.alert("Can't save.\nReason: user email is wrong."),!0},b}(Backbone.Model),c.exports=a})).call(this)}),window.require.register("views/AboutView",function(a,b,c){((function(){var a,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("./templates/about"),c.exports=a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.id="about-view",b.prototype.template=d,b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/AppLayout",function(a,b,c){((function(){var a,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("application"),c.exports=a=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return f(c,a),c.prototype.template=b("views/templates/appLayout"),c.prototype.el="body",c.prototype.regions={menu:"#menu",content:"#content",footer:"#footer",popup:"#popup"},c}(Backbone.Marionette.Layout)})).call(this)}),window.require.register("views/ComicsReaderView",function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("views/GenericPopupView"),e=b("views/templates/comicsreaderview"),c.exports=a=function(a){function b(){this.next=f(this.next,this),this.prev=f(this.prev,this),this.last=f(this.last,this),this.first=f(this.first,this),this.maxPage=f(this.maxPage,this),this.onBtnClick=f(this.onBtnClick,this),this.resize=f(this.resize,this),this.onRender=f(this.onRender,this),this.renderPage=f(this.renderPage,this),this.onKeyUp=f(this.onKeyUp,this),this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.template=e,b.prototype.initialize=function(){return this.model.on("change",this.renderPage),this.$(".modal-body").on("keyup",this.onKeyUp)},b.prototype.onKeyUp=function(a){return console.log(a.which)},b.prototype.renderPage=function(){return this.$("#page-show").attr("src","page?page="+this.model.get("currentPage")+"&at="+this.model.get("path")),this.$(".pagination li").removeClass("active"),this.$('li[data-number="'+this.model.get("currentPage")+'"]').addClass("active"),this.$(".modal-body")[0].scrollTop=0,this.$(".modal-footer a").tooltip()},b.prototype.onRender=function(a){return this.renderPage()},b.prototype.resize=function(a){var b,c,d;return c=a==="btn-zoom-plus"?1:-1,b=parseInt(this.$("#page-show").attr("width")),d=b+10*c,d>100&&(d=100),d<10&&(d=10),this.$("#page-show").attr({width:""+d+"%",height:""+d+"%"})},b.prototype.onBtnClick=function(a){var b,c,d,e;return typeof a.preventDefault=="function"&&a.preventDefault(),b="",a.target.className.match(/btn-save/)&&(b="save"),a.target.className.match(/btn-cancel/)&&(b="cancel"),b?this.$("div.modal").modal("hide"):(c=$(a.target).text(),(d=c.toLowerCase())==="first"||d==="prev"||d==="next"||d==="last"?this[c.toLowerCase()]():(e=$(a.target).attr("id"))==="btn-zoom-plus"||e==="btn-zoom-minus"?this.resize($(a.target).attr("id")):this.model.set("currentPage",parseInt(c)-1))},b.prototype.maxPage=function(){return this.model.get("pages").length-1},b.prototype.first=function(){return this.model.set("currentPage",0)},b.prototype.last=function(){return this.model.set("currentPage",this.maxPage())},b.prototype.prev=function(){var a;return a=parseInt(this.model.get("currentPage"))-1,a<0&&(a=0),this.model.set("currentPage",a)},b.prototype.next=function(){var a;return a=parseInt(this.model.get("currentPage"))+1,a>this.maxPage()&&(a=this.maxPage()),this.model.set("currentPage",a)},b}(d)})).call(this)}),window.require.register("views/ContentsBCView",function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};g=b("./templates/contents_bc"),d=b("models/item"),e=b("models/items"),f=b("application"),c.exports=a=function(a){function b(){this.onRender=h(this.onRender,this),this.onClick=h(this.onClick,this),this.reload=h(this.reload,this),this.initialize=h(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.template=g,b.prototype.initialize=function(){var a=this;return f.vent.on("item:loaded",function(b){return a.model=b,a.render()}),this.reload()},b.prototype.reload=function(){return this.model=f.item},b.prototype.events={"click a":"onClick"},b.prototype.onClick=function(a){return typeof a.preventDefault=="function"&&a.preventDefault(),this.model=new d({path:$(a.target).attr("data-path")}),f.vent.trigger("item:selected",this.model),!1},b.prototype.onRender=function(a){return this.$("li:last").addClass("active"),this.$("span.divider:last").remove()},b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/ContentsMainView",function(a,b,c){((function(){var a,d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j=Object.prototype.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};h=b("./templates/contents_main"),d=b("models/item"),f=b("models/items"),e=b("views/ItemListView"),g=b("application"),c.exports=a=function(a){function b(){this.goto=i(this.goto,this),this.next=i(this.next,this),this.prev=i(this.prev,this),this.last=i(this.last,this),this.first=i(this.first,this),this.onNavigate=i(this.onNavigate,this),this.onRender=i(this.onRender,this),this.onDeferImgResolve=i(this.onDeferImgResolve,this),this.onDeferImgProgress=i(this.onDeferImgProgress,this),this.doDeferImgNotify=i(this.doDeferImgNotify,this),this.loadItems=i(this.loadItems,this),this.reload=i(this.reload,this),this.onKeyUp=i(this.onKeyUp,this),this.initialize=i(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.template=h,b.prototype.itemViewContainer="#dir-list",b.prototype.itemView=e,b.prototype.initialize=function(){var a=this;return $(document.body).on("keyup",this.onKeyUp),g.vent.on("item:loaded",function(b){return a.reload()}),g.vent.on("thumb:loaded",this.doDeferImgNotify),this.$el.on("click",".btn",this.onNavigate),this.$el.on("change","#opt-external-reader",function(){return g.setReader(a.$("#opt-external-reader").is(":checked")?!0:!1)}),this.reload()},b.prototype.onKeyUp=function(a){switch(a.which){case 36:case 103:return this.first(),!1;case 35:case 97:return this.last(),!1;case 37:case 100:return this.prev(),!1;case 39:case 102:return this.next(),!1;default:return!0}},b.prototype.reload=function(){return this.model=g.item,this.loadItems()},b.prototype.loadItems=function(a){return this.fullCollection=new f(this.model.get("files")),this.fullCollection.currentPage=this.model.get("currentPage"),this.collection=this.fullCollection.parse(),this.render()},b.prototype.doDeferImgNotify=function(){return this.$deferImg.notify()},b.prototype.onDeferImgProgress=function(){this.imgLoaded+=1,this.$("#progress-bar").css({width:""+(this.imgLoaded+1)/this.imgLen*100+"%"});if(this.imgLoaded===this.imgLen)return this.$deferImg.resolve()},b.prototype.onDeferImgResolve=function(){var a=this;return setTimeout(function(){return a.$("#progress-wrapper").hide(),a.$(".thumbnails").effect("slide",750),$("html").removeClass("busy")},200)},b.prototype.onRender=function(){var a,b,c,d,e,f,g;return $("html").addClass("busy"),b=((d=this.fullCollection)!=null?d.currentPage:void 0)*((e=this.fullCollection)!=null?e.perPage:void 0)+1,a=b+((f=this.fullCollection)!=null?f.perPage:void 0)-1,c=(g=this.fullCollection)!=null?g.length:void 0,a>c&&(a=c),this.$("#page-status").text(""+b+" - "+a+" of "+c),this.imgLen=this.$("img").length,this.imgLoaded=0,this.$deferImg=new $.Deferred,this.$deferImg.progress(this.onDeferImgProgress),this.$deferImg.done(this.onDeferImgResolve),this.$("img").on("load error",this.doDeferImgNotify)},b.prototype.onNavigate=function(a){return this[$(a.target).attr("data-nav")]()},b.prototype.first=function(){return this.goto(0)},b.prototype.last=function(){return this.goto(this.fullCollection.maxPage())},b.prototype.prev=function(){return this.goto(this.fullCollection.currentPage-1)},b.prototype.next=function(){return this.goto(this.fullCollection.currentPage+1)},b.prototype.goto=function(a){var b;a<0&&(a=0),b=this.fullCollection.maxPage(),a>b&&(a=b);if(a===this.fullCollection.currentPage)return;return this.fullCollection.currentPage=a,this.model.set("currentPage",a),g.vent.trigger("item:selected",this.model)},b}(Backbone.Marionette.CompositeView)})).call(this)}),window.require.register("views/ContentsView",function(a,b,c){((function(){var a,d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j=Object.prototype.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};h=b("./templates/contents"),g=b("application"),d=b("./ContentsBCView"),e=b("./ContentsMainView"),a=b("./ComicsReaderView"),c.exports=f=function(a){function b(){this.onRender=i(this.onRender,this),this.initialize=i(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.template=h,b.prototype.regions={breadcrumbs:"#contents-bc",main:"#contents-main",comics_reader:"#comics-popup"},b.prototype.initialize=function(){var a,b=this;return this.item=g.item,this.bcView=new d(this.item),this.mainView=new e(this.item),this.readerView=null,a=this,this.nickName="ContentsView",g.vent.on("comics:selected",function(a){return a.fetch({success:function(b,c){var d;return d="reader.html?page=0&at="+a.get("path")+"&pages="+a.get("pages").length,g.optExternalReader===!0?(window.popup=window.open(d,a.get("name"),"location=0, directories=0, status=0, menubar=0, resizable=0"),typeof popup.requestFullScreen=="function"?popup.requestFullScreen():void 0):g.vent.trigger("reader",{comic:b,page:0})},error:function(a){return bootbox.alert("Cannot retrieve item<br/>Server possibly down.")}})})},b.prototype.onRender=function(a){return this.breadcrumbs.show(this.bcView),this.main.show(this.mainView)},b}(Backbone.Marionette.Layout)})).call(this)}),window.require.register("views/FooterView",function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("./templates/footer"),d=b("application"),a=function(a){function b(){this.onRender=f(this.onRender,this),this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(){},b.prototype.onRender=function(a){return d.getVisitors(function(a){return this.$("#visitor-number").text("Visitor Number "+a)})},b.prototype.template=e,b}(Backbone.Marionette.ItemView),c.exports=a})).call(this)}),window.require.register("views/GenericPopupView",function(a,b,c){((function(){var a,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("views/templates/genericpopupview"),c.exports=a=function(a){function b(){this.render=e(this.render,this),this.onBtnClick=e(this.onBtnClick,this),b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.template=d,b.prototype.onBtnClick=function(a){return console.log("Clicked on a link"),typeof a.preventDefault=="function"&&a.preventDefault(),this.$("div.modal").modal("hide")},b.prototype.render=function(){return Backbone.Marionette.ItemView.prototype.render.apply(this,arguments),console.log("GenericPopupView render"),this.$("a").on("click",this.onBtnClick),this.$("div.modal").modal()},b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/HomeView",function(a,b,c){((function(){var a,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("./templates/home"),c.exports=a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.id="home-view",b.prototype.template=d,b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/ItemListView",function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("./templates/itemlist"),d=b("application"),c.exports=a=function(a){function b(){this.onClick=f(this.onClick,this),this.onThumb=f(this.onThumb,this),this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.template=e,b.prototype.tagName="li",b.prototype.className="span2",b.prototype.events={click:"onClick"},b.prototype.initialize=function(){return this.$el.on("load error","img",this.onThumb)},b.prototype.onThumb=function(){return console.log("Thumb loaded"),d.vent.trigger("thumb:loaded")},b.prototype.onClick=function(a){var b;return typeof a.preventDefault=="function"&&a.preventDefault(),(b=this.model.get("type"))==="rarfile"||b==="zipfile"?(this.model.set("currentPage",0),d.libraryPath=location.href,d.vent.trigger("comics:selected",this.model)):d.vent.trigger("item:selected",this.model),!1},b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/MenuView",function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};g=b("./templates/menu"),d=b("models/styles"),e=b("views/StylesView"),f=b("application"),c.exports=a=function(a){function b(){this.setContentsRoute=h(this.setContentsRoute,this),this.highlight=h(this.highlight,this),this.onRender=h(this.onRender,this),this.setFakeUser=h(this.setFakeUser,this),this.submit=h(this.submit,this),this.setReader=h(this.setReader,this),this.setTheme=h(this.setTheme,this),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.template=g,b.prototype.events={submit:"submit","change #cbo-styles":"setTheme","change #opt-external-reader":"setReader"},b.prototype.setTheme=function(a){return f.setTheme(this.$("#cbo-styles").val())},b.prototype.setReader=function(a){return f.setReader($(a.target).is(":checked"))},b.prototype.submit=function(a){return typeof a.preventDefault=="function"&&a.preventDefault(),!this.$(".username-input").val()||!this.$(".pwd-input").val()?!1:(this.setFakeUser({username:this.$(".username-input").val(),pwd:this.$(".pwd-input").val()}),!1)},b.prototype.setFakeUser=function(a){var b=this;return this.options.dataSource.getUser(a.username,a.pwd,function(a,c){return c?b.options.vent.trigger("login",c):bootbox.alert(a)})},b.prototype.onRender=function(){var a,b=this;return this.highlight({href:this.currentRoute}),this.$('a[href="#newuser"], a[href="#edituser"]').tooltip({placement:"bottom"}),a=new d,a.fetch({success:function(){var c,d,e;for(d=0,e=a.length-1;0<=e?d<=e:d>=e;0<=e?d++:d--)c=$("<option>"),c.val(a.at(d).get("value")),c.text(a.at(d).get("text")),b.$("#cbo-styles").append(c);return b.$("#cbo-styles").val(f.theme)}}),this.$("#opt-external-reader")[0].checked=f.optExternalReader},b.prototype.highlight=function(a){return this.currentRoute=a.href,this.$("ul.nav>li").removeClass("active"),this.$("li>a[data-href='#"+a.href+"']").parent().addClass("active")},b.prototype.setContentsRoute=function(a){return this.$("#contents-link").attr("href",a)},b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/ReaderView",function(a,b,c){((function(){var a,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("application"),d=b("models/item"),f=b("./templates/reader"),c.exports=a=function(a){function b(){this.setImage=g(this.setImage,this),this.onRender=g(this.onRender,this),this.showStatus=g(this.showStatus,this),this.onCboChange=g(this.onCboChange,this),this.onLoadImg=g(this.onLoadImg,this),this.doZoom=g(this.doZoom,this),this.onZoomIn=g(this.onZoomIn,this),this.onZoomOut=g(this.onZoomOut,this),this.onKeyUp=g(this.onKeyUp,this),this.goto=g(this.goto,this),this.onNext=g(this.onNext,this),this.onLast=g(this.onLast,this),this.onPrev=g(this.onPrev,this),this.onFirst=g(this.onFirst,this),this.initialize=g(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.template=f,b.prototype.events={"load #current-img":"onLoadImg","keyup #current-img":"onKeyUp","click #btn-ensmall":"onZoomOut","click #btn-enlarge":"onZoomIn","click #btn-first":"onFirst","click #btn-prev":"onPrev","click #btn-next":"onNext","click #btn-last":"onLast"},b.prototype.initialize=function(){var a,b=this;return this.loaded=!1,$(document.body).on("keyup",this.onKeyUp),this.page=parseInt(this.model.get("page")),this.maxPage=0,this.zoom=this.model.get("zoom")||70,this.path=this.model.get("comic").replace(/_/g,"/"),a=new d({path:this.path}),a.fetch({success:function(a,c){return b.loaded=!0,b.comic=a,b.maxPage=a.get("pages").length-1,b.render()},error:function(a){return bootbox.alert("Can't load image<br/>Server possibly down")}})},b.prototype.onFirst=function(){return this.goto(0)},b.prototype.onPrev=function(){var a;a=this.page-1;if(a>-1)return this.goto(a)},b.prototype.onLast=function(){return this.goto(this.maxPage)},b.prototype.onNext=function(){var a;a=this.page+1;if(a<=this.maxPage)return this.goto(a)},b.prototype.goto=function(a){this.page=a;if(this.page<0||this.page>this.maxPage)return;return e.vent.trigger("reader",{comic:this.comic,page:this.page,zoom:this.zoom,dontReload:!0})},b.prototype.onKeyUp=function(a){switch(a.which){case 27:return window.location=this.$("#btn-library").attr("href"),!1;case 107:case 187:return this.onZoomIn(),!1;case 109:case 189:return this.onZoomOut(),!1;case 36:case 103:return this.onFirst(),!1;case 35:case 97:return this.onLast(),!1;case 37:case 100:return this.onPrev(),!1;case 39:case 102:return this.onNext(),!1;case 38:case 104:return this.$("#current-img").parent()[0].scrollTop=this.$("#current-img").parent()[0].scrollTop-this.$("#current-img").parent()[0].scrollHeight/20,!1;case 40:case 98:return this.$("#current-img").parent()[0].scrollTop=this.$("#current-img").parent()[0].scrollTop+this.$("#current-img").parent()[0].scrollHeight/20,!1;default:return!0}},b.prototype.onZoomOut=function(){return this.doZoom(-1)},b.prototype.onZoomIn=function(){return this.doZoom(1)},b.prototype.doZoom=function(a){var b,c;b=parseInt($("#current-img").attr("width")),c=b+10*a,c>100&&(c=100),c<10&&(c=10);if(c!==b)return this.zoom=c,$("#current-img").attr({width:""+c+"%",height:""+c+"%"})},b.prototype.onLoadImg=function(){return $("html").removeClass("busy"),this.$("#current-img").effect("slide")},b.prototype.onCboChange=function(){return this.goto(parseInt(this.$("#cbo-pages").val()))},b.prototype.showStatus=function(){var a,b;for(a=0,b=this.maxPage;0<=b?a<=b:a>=b;0<=b?a++:a--)this.$("#cbo-pages").append($("<option value='"+a+"'>"+(a+1)+"</option>"));return this.$("#status-label2").text("of "+(this.maxPage+1)),this.$("#cbo-pages").val(""+this.page)},b.prototype.onRender=function(a){if(!this.loaded)return;return this.$("#btn-library").attr("href",e.libraryPath),this.$(".btn").tooltip(),this.setImage(),this.$("#cbo-pages").on("change",this.onCboChange)},b.prototype.setImage=function(){var a;return $("html").addClass("busy"),a="page?page="+this.page+"&at="+this.path+"&pages="+(this.maxPage+1),this.$("#current-img").off("load"),this.$("#current-img").on("load",this.onLoadImg),this.$("#current-img").attr({src:a,width:""+this.zoom+"%",height:""+this.zoom+"%"}),this.showStatus()},b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/StylesView",function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("./templates/styleslist"),d=b("application"),c.exports=a=function(a){function b(){this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.template=e,b.prototype.initialize=function(){var a=this;return this.el=this.options.el,this.collection.fetch({success:function(){return console.log("Styles collection has "+a.collection.length+" elements"),a.render()},error:function(){return console.log("Couldn't retrieve styles from the server ;-(")}})},b}(Backbone.Marionette.ItemView)})).call(this)}),window.require.register("views/UserItemView",function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=b("views/GenericPopupView"),e=b("views/templates/useritemview"),c.exports=d=function(a){function b(){this.onBtnClick=f(this.onBtnClick,this),this.onRender=f(this.onRender,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.template=e,b.prototype.onRender=function(a){console.log("Custom post-rendering of UserItemView");if(this.options.mode==="insert")return this.$("div.modal-header>h3").text("New User");if(this.options.mode==="update")return this.$("div.modal-header>h3").text("Edit user "+this.model.get("fullname"))},b.prototype.onBtnClick=function(a){var b,c=this;typeof a.preventDefault=="function"&&a.preventDefault(),b="",a.target.className.match(/btn-save/)&&(b="save"),a.target.className.match(/btn-cancel/)&&(b="cancel");if(b==="save"){if(!(this.$("#txt-username").val()&&this.$("#txt-fullname").val()&&this.$("#txt-email").val()&&this.$("#txt-pwd").val()))return;this.model.set({username:this.$("#txt-username").val(),fullname:this.$("#txt-fullname").val(),email:this.$("#txt-email").val(),pwd:this.$("#txt-pwd").val()}),this.options.mode==="insert"?this.options.dataSource.insertUser(this.model,function(a,b){if(!a)return c.options.vent.trigger("login",b)}):this.options.mode==="update"&&this.options.dataSource.updateUser(this.model.cid,this.model.toJSON(),function(a,b){if(!a)return c.options.vent.trigger("login",b)})}if(b)return this.$("div.modal").modal("hide")},b}(a)})).call(this)}),window.require.register("views/templates/about",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="span12">\n    <div class="row-fluid well">\n        <div class="span5"><h3>About Silver Age Comics</h3></div>\n        <div class="span1"><img class="img-rounded" src="/legionthumb"/></div>\n        <div class="span2 offset1" style="padding: 10px;">\n            <p>\n              All the heroes.\n            </p>\n            <p>\n              All the villains.\n            </p>\n        </div>\n    </div>\n    <hr/>\n    <div class="row-fluid">\n        <strong>\n            <p>&nbsp;</p>\n            Wow! It\'s been a long time now...but...<br/>\n            <h3>We\'re back!</h3>\n            And now... stronger than ever!<br/>\n            Now, besides the classic Legion of Superheroes and Crisis on Infinite Earths<br/>\n            You get...<br/>\n            <ul>\n                <li>The complete Adventure Comics Collection!</li>\n                <li>The complete Action Comics Collection!</li>\n                <li>The complete Superboy Collection!</li>\n            </ul>\n            And, as of May 2013, a lot more! Just <a href="#contents">browse through it!</a><br/>\n        </strong>\n    </div>\n</div>\n\n    '})}),window.require.register("views/templates/appLayout",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'\n<div id="menu" class="navbar navbar-fixed-top"></div>\n<div id="content" class="container-fluid"></div>\n<div id="footer"></div>\n<div id="popup"></div>'})}),window.require.register("views/templates/comicsreaderview",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+='\n                <!--<li data-number="',d=a.real,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this.real",{hash:{}})),c+=o(d)+'"><a href="#">',d=a.shown,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this.shown",{hash:{}})),c+=o(d)+"</a></li>-->\n              ",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="modal hide" style="width: 95%; margin: -50px 0 0 -650px;">\n  <div class="modal-header" style="max-height: 3em;">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h5>',i=c.bareName,g=i||b.bareName,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"bareName",{hash:{}})),f+=o(g)+'</h5>\n  </div>\n  <div class="modal-body" style="text-align: center; min-height: 33.5em;">\n      <img id="page-show" width="70%" height="70%" src="page?page=',i=c.currentPage,g=i||b.currentPage,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"currentPage",{hash:{}})),f+=o(g)+"&at=",i=c.path,g=i||b.path,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"path",{hash:{}})),f+=o(g)+'" class="img-polaroid" />\n  </div>\n  <div class="modal-footer" style="padding: 0; max-height: 6em; min-height: 6em;">\n      <!--<a href="#" class="btn btn-cancel">Cancel</a>\n      <a href="#" class="btn btn-primary btn-save">Save</a>-->\n        <div class="pagination" style="font-size: smaller; text-align: center;">\n          <ul>\n              <li><a href="#" title="First Page">First</a></li>\n              <li><a href="#" title="Previous Page">Prev</a></li>\n              <li><a href="#" title="Next Page">Next</a></li>\n              <li><a href="#" title="Last Page">Last</a></li>\n              <span class="divider">&nbsp;&nbsp;</span>\n              <li><a id="btn-zoom-plus" href="#" title="Zoom in image">+</a></li>\n              <li><a id="btn-zoom-minus" href="#" title="Zoom out image">-</a></li>\n              <span class="divider">&nbsp;&nbsp;</span>\n              ',i=c.pageNumbers,g=i||b.pageNumbers,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n          </ul>\n        </div>\n  </div>\n</div>",f})}),window.require.register("views/templates/contents",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'\n<div class="row" id="contents-bc">\n    BreadCrumbs\n</div>\n\n<div class="row" id="contents-main">\n    Main Contents\n</div>\n\n<div id="comics-popup">\n\n</div>\n'})}),window.require.register("views/templates/contents_bc",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n                <li>\n                    <a href="#" data-path="',e=a.path,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"this.path",{hash:{}})),d+=o(e)+'">\n                        ',e=a.name,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='\n                    </a>\n                </li>\n                <span class="divider"> / </span>\n            ',d}function q(a,b){var c="",d;return c+="\n                          ",d=a.name,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this.name",{hash:{}})),c+=o(d)+"\n                        ",c}function r(a,b){return"\n                        <strong>Silver Age Comics Library</strong>\n                        "}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='    <div class="span12" style="font-size: small; width: 95%;">\n        <div class="well-small">\n            <ul class="breadcrumb">\n            ',i=c.ancestryObjs,g=i||b.ancestryObjs,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n            </ul>\n        </div>\n    </div>\n\n",f})}),window.require.register("views/templates/contents_main",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'  <div class="row-fluid" style="text-align: center; overflow: hidden; padding-left: 1em; margin-top: 0px; max-height: 25em; min-height: 25em;">\n    <div class="progress progress-striped active" id="progress-wrapper">\n      <div id="progress-bar" class="bar" style="width: 20%;"></div>\n    </div>\n    <ul id="dir-list" class="thumbnails" style="display: none;">\n      <div class="span1"></div>\n    </ul>\n  </div>\n  <div class="row-fluid" style="max-height: 3em; min-height: 3em;">\n    <hr/>\n  </div>\n  <div class="row-fluid">\n    <div class="span12" style="text-align: center;">\n        <div class="btn-group">\n          <button class="btn" data-nav="first">First</button>\n          <button class="btn" data-nav="prev">Previous</button>\n        <!--</div>-->\n        <button style="padding-left: 1em; padding-right: 1em; font-size: 10pt; font-weight: bold; background: #45aeea; border: 1px solid; border-radius: 3px; padding: 5px; color: #ffffff;" id="page-status">-</button>\n        <!--<div class="btn-group">-->\n          <button class="btn" data-nav="next">Next</button>\n          <button class="btn" data-nav="last">Last</button>\n        </div>\n    </div>\n    <!--<div class="span2 pull-right">\n        <label class="checkbox" title="Must enable popup windows in order to use this option">\n            <input type="checkbox" id="opt-external-reader">\n                External Reader\n            </input>\n        </label>\n    </div>-->\n  </div>\n'})}),window.require.register("views/templates/footer",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'\n<footer class="navbar-fixed-bottom" style="border-top: solid 1px; padding-top: 0.5em; padding-bottom: 0.5em; color: #666666; border-color: #cccccc;">\n    <div class="container-padded">\n      <span>\n        <a href="http://silveragecomics.ods.org">Silver Age Comics</a> powered by \n        <a target="_blank" href="https://github.com/sandy98/brunch-with-puppets#brunch-with-puppets">Brunch with Puppets</a> \n      </span>\n      <span class="badge badge-info pull-right" id="visitor-number">Visitor Number</span>\n      <img id="ajax-loader" src="img/spinner.gif" style="display: none; position: absolute; bottom: 40px; right: 20px; z-index: 1000;"/>\n    </div>\n</footer>'})}),window.require.register("views/templates/genericpopupview",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="modal hide fade">\n  <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h3>',h=c.title,g=h||b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+'</h3>\n  </div>\n  <div class="modal-body">\n      <p>',h=c.message,g=h||b.message,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"message",{hash:{}})),f+=m(g)+'</p>\n  </div>\n  <div class="modal-footer">\n      <a href="#" class="btn">Close</a>\n      <a href="#" class="btn btn-primary">OK</a>\n  </div>\n</div>',f})}),window.require.register("views/templates/home",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'    \n\n<div class="row-fluid">\n    <div class="well">\n      <h3>Silver Age of Comics Home</h3>\n    </div>\n    <div class="row-fluid">\n        <div class="span7">\n            <p>This site is devoted to preserve the rich heritage of the Silver Age of Comics.</p>\n            <p>Here you\'ll be able to read online some of the greatest comics of the Silver Age</p>\n            <p>We hope this encourages you to buy your own copies of these fine comics and by so doing adding to the preserving mission.</p>\n            <p>For further info regarding comics acquisition, visit <a target="_blank" href="http://www.dccomics.com">DC Comics</a></p>\n            <p><strong>Don\'t let the flame extinguish!</strong></p>\n        </div>\n        <div class="span2">\n            <img class="img-polaroid" src="/legionthumb" width="100%" height="100%" />\n        </div>\n        <div class="span2 offset1">\n            Your contributions to help us keep up and running will be greatly appreciated.<br/><br/>\n            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">\n                <input type="hidden" name="cmd" value="_s-xclick">\n                <input type="hidden" name="hosted_button_id" value="AAEDARGYSGDMJ">\n                <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">\n                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">\n            </form>\n        </div>\n    </div>\n</div>\n    '})}),window.require.register("views/templates/itemlist",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){return'\n    <img class="img-rounded" src="supi_folder" width="100%" height="100%"/>\n  '}function q(a,b){var d="",e,f;d+="\n    ",i=c.isComic,e=i||a.isComic,f=c["if"],j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n  ",d}function r(a,b){var d="",e;return d+='\n      <img class="img-polaroid" src="zoompage?zoom=16&page=0&at=',i=c.path,e=i||a.path,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"path",{hash:{}})),d+=o(e)+'" width="100%" height="100%" />\n    ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<a class="thumbnail" style="margin-bottom: 5px; font-size: smaller;" href="#contents" data-path="',i=c.path,g=i||b.path,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"path",{hash:{}})),f+=o(g)+'">\n  ',i=c.isDirectory,g=i||b.isDirectory,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(3,q,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n  ",i=c.name,g=i||b.name,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"name",{hash:{}})),f+=o(g)+"\n</a>",f})}),window.require.register("views/templates/menu",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n        <ul class="nav nav-pills pull-right">\n            <li><a style="color: #ff4400;" href="#edituser" title="Edit user data">',i=c.fullname,e=i||a.fullname,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"fullname",{hash:{}})),d+=o(e)+'</a></li>\n            <li><a href="#dologout">Sign out</a></li>\n        </ul>\n        ',d}function q(a,b){return'\n        <ul class="nav pull-right">\n            <li><a href="#newuser" title="Become a member">Sign up</a></li>\n        </ul>\n        <form class="navbar-form pull-right">\n            <input class="span2 username-input" type="text" placeholder="username or email" required="required">\n            <input class="span2 pwd-input" type="password" placeholder="password" required="required">\n            <button type="submit" class="btn btn-small">Sign in</button>\n        </form>\n        '}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='  <div class="navbar-inner">\n    <div class="container">\n      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n      </a>\n      <a class="brand" href="#">Silver Age Comics</a>\n      <div class="nav-collapse collapse">\n        <ul class="nav">\n          <li><a data-href="#" href="#">Home</a></li>\n          <li><a id="contents-link" data-href="#contents" href="#contents">Comics Library</a></li>\n          <li class="dropdown">\n              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Preferences</a>\n              <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">\n                <li>\n                  <a tabindex="-1">\n                    <label for="cbo-styles">Themes</label>\n                    <select id="cbo-styles">\n                    </select>\n                  </a>\n                </li>\n                <li class="divider"></li>\n                <li>\n                  <a tabindex="-1">\n                    <label class="checkbox" title="Must enable popup windows in order to use this option">\n                      <input type="checkbox" id="opt-external-reader">\n                        External Reader\n                      </input>\n                    </label>\n                  </a>\n                </li>\n              </ul>\n          </li>\n          <li><a data-href="#about" href="#about">About</a></li>\n        </ul>\n \n        <!--\n        ',i=c.username,g=i||b.username,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(3,q,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n        -->\n      </div>\n    </div>\n  </div>\n",f})}),window.require.register("views/templates/reader",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div>\n  <div class="row-fluid" style="text-align: center; max-height: 34em; min-height: 34em; overflow: auto; padding-left: 1em; margin-top: 0px;">\n      <img  style="display: none;" id="current-img" width="70%" height="70%" src="" />\n  </div>\n  <div class="row-fluid" style="text-align: center; padding-top: 0.5em;">\n      <div class="span2 pull-left">\n          <a id="btn-library" class="btn btn-primary" href="#contents">Back to library</a>\n      </div>\n      <div class="span5 offset2" style="text-align: center;">\n          <button class="btn" id="btn-first" title="First Page"><i class="icon-chevron-left"></i><i class="icon-chevron-left"></i></button>\n          <button class="btn" id="btn-prev" title="Previous Page"><i class="icon-chevron-left"></i></button>\n          <span id="status-label1" class="label label-info" style="padding: 0.5em;">Page </span>\n          <select style="width: 4em; height: 1.8em; bottom: 0; margin-bottom: 0;" class="combobox" id="cbo-pages">\n              <!--<option value="0" selected="selected">1</option>-->\n          </select>\n          <span id="status-label2" class="label label-info" style="padding: 0.5em;"></span>\n          <button class="btn" id="btn-next" title="Next Page"><i class="icon-chevron-right"></i></button>\n          <button class="btn" id="btn-last" title="Last Page"><i class="icon-chevron-right"></i><i class="icon-chevron-right"></i></button>\n      </div>\n      <div class="span2 pull-right">\n        <button class="btn" id="btn-ensmall" title="Smaller Image"><i class="icon-zoom-out"></i></button>\n        <button class="btn" id="btn-enlarge" title="Larger Image"><i class="icon-zoom-in"></i></button>\n      </div>\n  </div>\n</div>'})}),window.require.register("views/templates/styleslist",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+='\n  <option value="',d=a.value,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this.value",{hash:{}})),c+=o(d)+'">',d=a.text,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this.text",{hash:{}})),c+=o(d)+"</option>\n",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;i=c.collection,g=i||b.collection,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n\n",f})}),window.require.register("views/templates/useritemview",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="modal hide fade">\n  <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h3></h3>\n  </div>\n  <div class="modal-body">\n    <form class="form-horizontal well well-shadow">\n      <fieldset>\n        <legend>User Data</legend>\n        <div class="control-group">\n          <label class="control-label" for="txt-username">Username</label>\n          <div class="controls">\n            <input type="text" placeholder="username" id="txt-username" value="',h=c.username,g=h||b.username,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"username",{hash:{}})),f+=m(g)+'" />\n          </div>\n        </div>\n        <div class="control-group">\n          <label class="control-label" for="txt-fullname">Full Name</label>\n          <div class="controls">\n            <input type="text" placeholder="full name" id="txt-fullname" value="',h=c.fullname,g=h||b.fullname,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"fullname",{hash:{}})),f+=m(g)+'" />\n          </div>\n        </div>\n        <div class="control-group">\n          <label class="control-label" for="txt-email">eMail</label>\n          <div class="controls">\n            <input type="text" placeholder="email" id="txt-email" value="',h=c.email,g=h||b.email,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"email",{hash:{}})),f+=m(g)+'" />\n          </div>\n        </div>\n        <div class="control-group">\n          <label class="control-label" for="txt-pwd">Password</label>\n          <div class="controls">\n            <input type="password" placeholder="password" id="txt-pwd" value="',h=c.pwd,g=h||b.pwd,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"pwd",{hash:{}})),f+=m(g)+'" />\n          </div>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n  <div class="modal-footer">\n      <a href="#" class="btn btn-cancel">Cancel</a>\n      <a href="#" class="btn btn-primary btn-save">Save</a>\n  </div>\n</div>',f})})